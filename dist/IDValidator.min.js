!function(e){var r="undefined"!=typeof window,t=r?window:this,n=function(){return e(r,t)};"undefined"!=typeof define&&define.amd?define("IDValidator",[],n):"function"==typeof define&&define.cmd?define(function(n,i,a){a.exports=e(r,t)}):"undefined"!=typeof module&&module.exports?module.exports=e(r,t):t.IDValidator=e(r,t)}(function(e,r){var t={error:{longNumber:"长数字存在精度问题，请使用字符串传值！ Long number is not allowed, because the precision of the Number In JavaScript."}},n={checkArg:function(e){var r=typeof e;switch(r){case"number":if(e=e.toString(),e.length>15)return this.error(t.error.longNumber),!1;break;case"string":break;default:return!1}e=e.toUpperCase();var n=null;if(18===e.length)n={body:e.slice(0,17),checkBit:e.slice(-1),type:18};else{if(15!==e.length)return!1;n={body:e,type:15}}return n},checkAddr:function(e,r){var t=this.getAddrInfo(e,r);return t!==!1},getAddrInfo:function(e,r){if(r=r||null,null===r)return e;if(r.hasOwnProperty(e))return r[e];var t;return t=e.slice(0,4)+"00",r.hasOwnProperty(t)?r[t]+"未知地区":(t=e.slice(0,2)+"0000",!!r.hasOwnProperty(t)&&r[t]+"未知地区")},checkBirth:function(e){var r,t,n;if(8==e.length)r=parseInt(e.slice(0,4),10),t=parseInt(e.slice(4,6),10),n=parseInt(e.slice(-2),10);else{if(6!=e.length)return!1;r=parseInt("19"+e.slice(0,2),10),t=parseInt(e.slice(2,4),10),n=parseInt(e.slice(-2),10)}return!(t>12||0===t||n>31||0===n)},checkOrder:function(e){return!0},weight:function(e){return Math.pow(2,e-1)%11},rand:function(e,r){return r=r||1,Math.round(Math.random()*(e-r))+r},str_pad:function(e,r,t,n){if(e=e.toString(),r=r||2,t=t||"0",n=n||!1,e.length>=r)return e;for(var i=0,a=r-e.length;i<a;i++)n?e+=t:e=t+e;return e},error:function(e){var r=new Error;throw r.message="IDValidator: "+e,r}},i=function(e){"undefined"!=typeof e&&(this.GB2260=e),this.cache={}};return i.prototype={isValid:function(e){var r=this.GB2260||null,t=n.checkArg(e);if(t===!1)return!1;if(this.cache.hasOwnProperty(e)&&"undefined"!=typeof this.cache[e].valid)return this.cache[e].valid;this.cache.hasOwnProperty(e)||(this.cache[e]={});var i=t.body.slice(0,6),a=18===t.type?t.body.slice(6,14):t.body.slice(6,12),c=t.body.slice(-3);if(!(n.checkAddr(i,r)&&n.checkBirth(a)&&n.checkOrder(c)))return this.cache[e].valid=!1,!1;if(15===t.type)return this.cache[e].valid=!0,!0;for(var o=[],s=18;s>1;s--){var d=n.weight(s);o[s]=d}for(var l=0,h=t.body.split(""),u=0;u<h.length;u++)l+=parseInt(h[u],10)*o[18-u];var f=12-l%11;return 10==f?f="X":f>10&&(f%=11),f="number"==typeof f?f.toString():f,f!==t.checkBit?(this.cache[e].valid=!1,!1):(this.cache[e].valid=!0,!0)},getInfo:function(e){var r=this.GB2260||null;if(this.isValid(e)===!1)return!1;var t=n.checkArg(e);if("undefined"!=typeof this.cache[e].info)return this.cache[e].info;var i=t.body.slice(0,6),a=18===t.type?t.body.slice(6,14):t.body.slice(6,12),c=t.body.slice(-3),o={};return o.addrCode=i,null!==r&&(o.addr=n.getAddrInfo(i,r)),o.birth=18===t.type?[a.slice(0,4),a.slice(4,6),a.slice(-2)].join("-"):["19"+a.slice(0,2),a.slice(2,4),a.slice(-2)].join("-"),o.sex=c%2===0?0:1,o.length=t.type,18===t.type&&(o.checkBit=t.checkBit),this.cache[e].info=o,o},makeID:function(e){var r=this.GB2260||null,t=null;if(null!==r)for(var i=0;null===t;){if(i>10){t=110101;break}var a=n.str_pad(n.rand(50),2,"0"),c=n.str_pad(n.rand(20),2,"0"),o=n.str_pad(n.rand(20),2,"0"),s=[a,c,o].join("");if(r[s]){t=s;break}}else t=110101;var d=n.str_pad(n.rand(99,50),2,"0"),l=n.str_pad(n.rand(12,1),2,"0"),h=n.str_pad(n.rand(28,1),2,"0");if(e)return t+d+l+h+n.str_pad(n.rand(999,1),3,"1");d="19"+d;for(var u=t+d+l+h+n.str_pad(n.rand(999,1),3,"1"),f=[],p=18;p>1;p--){var y=n.weight(p);f[p]=y}for(var v=0,g=u.split(""),b=0;b<g.length;b++)v+=parseInt(g[b],10)*f[18-b];var k=12-v%11;return 10==k?k="X":k>10&&(k%=11),k="number"==typeof k?k.toString():k,u+k}},i});